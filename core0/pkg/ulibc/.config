#
# All configuration options must be added to LIBC_CONFIGS in order to be
# properly exported into gcc-uClibc.h by the master makefile
#
LIBC_CONFIGS=

CONFIG_GENERIC_ARM=$(CONFIG_ARM)
LIBC_CONFIGS+=CONFIG_GENERIC_ARM CONFIG_ARM7TDMI CONFIG_STRONGARM CONFIG_XSCALE
LIBC_CONFIGS+=CONFIG_CRIS

LIBC_CONFIGS+=CONFIG_H8300H CONFIG_H8S

CONFIG_GENERIC_386=$(CONFIG_PCBOX)

LIBC_CONFIGS+=CONFIG_GENERIC_386 CONFIG_386 CONFIG_486 CONFIG_586 CONFIG_586MMX CONFIG_686 CONFIG_PENTIUMIII CONFIG_PENTIUM4 CONFIG_K6 CONFIG_K7 CONFIG_CRUSOE CONFIG_WINCHIPC6 CONFIG_WINCHIP2 CONFIG_CYRIXIII

LIBC_CONFIGS+=CONFIG_SH2 CONFIG_SH3 CONFIG_SH4 CONFIG_SH5

HAVE_ELF=y
LIBC_CONFIGS+=HAVE_ELF

ifeq ($(TARGET_ENDIANESS),BIG)
  ARCH_BIG_ENDIAN=y
else
  ARCH_LITTLE_ENDIAN=y
endif
LIBC_CONFIGS+=ARCH_BIG_ENDIAN ARCH_LITTLE_ENDIAN

ifdef CONFIG_HAS_MMU
  ARCH_HAS_MMU=y
else
  ARCH_HAS_NO_MMU=y
endif
LIBC_CONFIGS+=ARCH_HAS_NO_MMU ARCH_HAS_MMU

ifndef CONFIG_HAS_MMU
  UCLIBC_UCLINUX_BROKEN_MUNMAP=y
endif
LIBC_CONFIGS+=UCLIBC_UCLINUX_BROKEN_MUNMAP

ifndef CONFIG_HAS_MMU
  EXCLUDE_BRK=y
endif
LIBC_CONFIGS+=EXCLUDE_BRK

ifndef CONFIG_RG_RGLOADER
  UCLIBC_HAS_FLOATS=y
endif  

ifdef CONFIG_RG_JPKG
  UCLIBC_HAS_FLOATS=y
endif
LIBC_CONFIGS+=UCLIBC_HAS_FLOATS

UCLIBC_HAS_SOFT_FLOAT=y
LIBC_CONFIGS+=UCLIBC_HAS_SOFT_FLOAT

#HAS_FPU=n XXX Something in libm depends on this
LIBC_CONFIGS+=HAS_FPU

DO_C99_MATH=$(CONFIG_ULIBC_DO_C99_MATH)
LIBC_CONFIGS+=DO_C99_MATH

# ulibc uses $(BUILDDIR)/pkg/build/ulibc/include/linux
KERNEL_SOURCE=$(BUILDDIR)/pkg/build/ulibc
LIBC_CONFIGS+=KERNEL_SOURCE

#ARCH_HAS_C_SYMBOL_PREFIX=
LIBC_CONFIGS+=ARCH_HAS_C_SYMBOL_PREFIX
ifeq ($(ARCH_HAS_C_SYMBOL_PREFIX),y)
  C_SYMBOL_PREFIX="_"
else
  C_SYMBOL_PREFIX=""
endif
LIBC_CONFIGS+=C_SYMBOL_PREFIX

HAVE_DOT_CONFIG=y

#
# General Library Settings
#
# HAVE_NO_PIC is not set
DOPIC=y
LIBC_CONFIGS+=DOPIC HAVE_NO_PIC

HAVE_SHARED=y
#HAVE_SHARED=$(CONFIG_ULIBC_SHARED)
LIBC_CONFIGS+=HAVE_SHARED

# ARCH_HAS_NO_LDSO is not set
BUILD_UCLIBC_LDSO=$(HAVE_SHARED)
LIBC_CONFIGS+=BUILD_UCLIBC_LDSO ARCH_HAS_NO_LDSO

LDSO_LDD_SUPPORT=$(BUILD_UCLIBC_LDSO)
LIBC_CONFIGS+=LDSO_LDD_SUPPORT
# FORCE_SHAREABLE_TEXT_SEGMENTS is not set
LIBC_CONFIGS+=FORCE_SHAREABLE_TEXT_SEGMENTS

# LDSO_CACHE_SUPPORT is not set
# LDSO_PRELOAD_FILE_SUPPORT is not set
LDSO_BASE_FILENAME="ld.so"
LIBC_CONFIGS+=LDSO_BASE_FILENAME

LDSO_RUNPATH=y
LIBC_CONFIGS+=LDSO_RUNPATH

# DL_FINI_CRT_COMPAT is not set
ifdef CONFIG_UCLIBCXX
  UCLIBC_CTOR_DTOR=y
endif
LIBC_CONFIGS+=UCLIBC_CTOR_DTOR

ifdef CONFIG_RG_THREADS
  UCLIBC_HAS_THREADS=y
endif
LIBC_CONFIGS+=UCLIBC_HAS_THREADS

ifdef CONFIG_RG_THREADS
  PTHREADS_DEBUG_SUPPORT=y
endif
LIBC_CONFIGS+=PTHREADS_DEBUG_SUPPORT

ifdef CONFIG_RG_LARGE_FILE_SUPPORT
  UCLIBC_HAS_LFS=y
endif
LIBC_CONFIGS+=UCLIBC_HAS_LFS

ifneq ($(CONFIG_RG_WBM)$(CONFIG_RG_SSI),)
  UCLIBC_HAS_TZ_FILE=y
  UCLIBC_HAS_TZ_FILE_READ_MANY=y
  UCLIBC_TZ_FILE_PATH="/etc/TZ"
endif
LIBC_CONFIGS+=UCLIBC_HAS_TZ_FILE UCLIBC_HAS_TZ_FILE_READ_MANY UCLIBC_TZ_FILE_PATH 

# UCLIBC_STATIC_LDCONFIG is not set

MALLOC=y
MALLOC_GLIBC_COMPAT=y
# MALLOC_SIMPLE is not set
# MALLOC_STANDARD is not set
LIBC_CONFIGS+=MALLOC_STANDARD MALLOC_SIMPLE MALLOC_GLIBC_COMPAT MALLOC

ifdef CONFIG_UCLIBCXX
  UCLIBC_DYNAMIC_ATEXIT=y
endif
LIBC_CONFIGS+=UCLIBC_DYNAMIC_ATEXIT

#HAS_SHADOW=n
LIBC_CONFIGS+=HAS_SHADOW

#UNIX98PTY_ONLY=n XXX Doesn't work for RG.
LIBC_CONFIGS+=UNIX98PTY_ONLY

#ASSUME_DEVPTS=n XXX Doesn't work for RG.
LIBC_CONFIGS+=ASSUME_DEVPTS

UCLIBC_HAS_TM_EXTENSIONS=y
LIBC_CONFIGS+=UCLIBC_HAS_TM_EXTENSIONS

UCLIBC_HAS_IPV6=$(CONFIG_IPV6)
LIBC_CONFIGS+=UCLIBC_HAS_IPV6

ifneq ($(CONFIG_NFS_FS)$(CONFIG_RG_NETKIT)$(CONFIG_IPTABLES)$(UCLIBC_HAS_RPC),)
  UCLIBC_HAS_RPC=y
endif
LIBC_CONFIGS+=UCLIBC_HAS_RPC

ifdef CONFIG_NFS_FS
  UCLIBC_HAS_FULL_RPC=y
endif
LIBC_CONFIGS+=UCLIBC_HAS_FULL_RPC

#
# String and Stdio Support
#
UCLIBC_HAS_STRING_GENERIC_OPT=y
UCLIBC_HAS_STRING_ARCH_OPT=y
UCLIBC_HAS_CTYPE_TABLES=y
UCLIBC_HAS_CTYPE_SIGNED=y
UCLIBC_HAS_CTYPE_UNSAFE=y
# UCLIBC_HAS_CTYPE_CHECKED is not set
# UCLIBC_HAS_CTYPE_ENFORCED is not set
# UCLIBC_HAS_WCHAR is not set
# UCLIBC_HAS_LOCALE is not set
# UCLIBC_HAS_HEXADECIMAL_FLOATS is not set
# UCLIBC_HAS_GLIBC_CUSTOM_PRINTF is not set
# USE_OLD_VFPRINTF is not set
UCLIBC_PRINTF_SCANF_POSITIONAL_ARGS=9
# UCLIBC_HAS_SCANF_GLIBC_A_FLAG is not set
# UCLIBC_HAS_STDIO_BUFSIZ_NONE is not set
# UCLIBC_HAS_STDIO_BUFSIZ_256 is not set
# UCLIBC_HAS_STDIO_BUFSIZ_512 is not set
# UCLIBC_HAS_STDIO_BUFSIZ_1024 is not set
# UCLIBC_HAS_STDIO_BUFSIZ_2048 is not set
UCLIBC_HAS_STDIO_BUFSIZ_4096=y
# UCLIBC_HAS_STDIO_BUFSIZ_8192 is not set
UCLIBC_HAS_STDIO_BUILTIN_BUFFER_NONE=y
# UCLIBC_HAS_STDIO_BUILTIN_BUFFER_4 is not set
# UCLIBC_HAS_STDIO_BUILTIN_BUFFER_8 is not set
# UCLIBC_HAS_STDIO_SHUTDOWN_ON_ABORT is not set
UCLIBC_HAS_STDIO_GETC_MACRO=y
UCLIBC_HAS_STDIO_PUTC_MACRO=y
UCLIBC_HAS_STDIO_AUTO_RW_TRANSITION=y
# UCLIBC_HAS_FOPEN_LARGEFILE_MODE is not set
# UCLIBC_HAS_FOPEN_EXCLUSIVE_MODE is not set
# UCLIBC_HAS_GLIBC_CUSTOM_STREAMS is not set
UCLIBC_HAS_PRINTF_M_SPEC=y
UCLIBC_HAS_ERRNO_MESSAGES=y
UCLIBC_HAS_SYS_ERRLIST=y
UCLIBC_HAS_SIGNUM_MESSAGES=y
# UCLIBC_HAS_SYS_SIGLIST is not set
UCLIBC_HAS_GNU_GETOPT=y

LIBC_CONFIGS+=UCLIBC_HAS_STRING_GENERIC_OPT UCLIBC_HAS_STRING_ARCH_OPT \
  UCLIBC_HAS_CTYPE_TABLES UCLIBC_HAS_CTYPE_SIGNED UCLIBC_HAS_CTYPE_UNSAFE \
  UCLIBC_HAS_CTYPE_CHECKED UCLIBC_HAS_CTYPE_ENFORCED UCLIBC_HAS_WCHAR \
  UCLIBC_HAS_LOCALE UCLIBC_HAS_HEXADECIMAL_FLOATS \
  UCLIBC_HAS_GLIBC_CUSTOM_PRINTF USE_OLD_VFPRINTF \
  UCLIBC_PRINTF_SCANF_POSITIONAL_ARGS \
  UCLIBC_HAS_SCANF_GLIBC_A_FLAG UCLIBC_HAS_STDIO_BUFSIZ_NONE \
  UCLIBC_HAS_STDIO_BUFSIZ_256 UCLIBC_HAS_STDIO_BUFSIZ_512 \
  UCLIBC_HAS_STDIO_BUFSIZ_1024 UCLIBC_HAS_STDIO_BUFSIZ_2048 \
  UCLIBC_HAS_STDIO_BUFSIZ_4096 UCLIBC_HAS_STDIO_BUFSIZ_8192 \
  UCLIBC_HAS_STDIO_BUILTIN_BUFFER_NONE UCLIBC_HAS_STDIO_BUILTIN_BUFFER_4 \
  UCLIBC_HAS_STDIO_BUILTIN_BUFFER_8 UCLIBC_HAS_STDIO_SHUTDOWN_ON_ABORT \
  UCLIBC_HAS_STDIO_GETC_MACRO UCLIBC_HAS_STDIO_PUTC_MACRO \
  UCLIBC_HAS_STDIO_AUTO_RW_TRANSITION UCLIBC_HAS_FOPEN_LARGEFILE_MODE \
  UCLIBC_HAS_FOPEN_EXCLUSIVE_MODE UCLIBC_HAS_GLIBC_CUSTOM_STREAMS \
  UCLIBC_HAS_PRINTF_M_SPEC UCLIBC_HAS_ERRNO_MESSAGES UCLIBC_HAS_SYS_ERRLIST \
  UCLIBC_HAS_SIGNUM_MESSAGES UCLIBC_HAS_SYS_SIGLIST UCLIBC_HAS_GNU_GETOPT

#
# Big and Tall
#
UCLIBC_HAS_REGEX=y
LIBC_CONFIGS+=UCLIBC_HAS_REGEX

# UCLIBC_HAS_WORDEXP is not set
LIBC_CONFIGS+=UCLIBC_HAS_WORDEXP

ifneq ($(CONFIG_RG_FILESERVER_ACLS_DEBUG)$(CONFIG_RG_RAID),)
  UCLIBC_HAS_FTW=y
endif
LIBC_CONFIGS+=UCLIBC_HAS_FTW

UCLIBC_HAS_GLOB=y
LIBC_CONFIGS+=UCLIBC_HAS_GLOB

#
# Library Installation Options
#

#Path on the Ramdisk for ldso
SHARED_LIB_LOADER_PREFIX="/lib"
LIBC_CONFIGS+=SHARED_LIB_LOADER_PREFIX

# RUNTIME_PREFIX=""
DEVEL_PREFIX=$(BUILDDIR)/pkg/ulibc
LIBC_CONFIGS+=DEVEL_PREFIX RUNTIME_PREFIX

#
# uClibc security related options
#
# UCLIBC_SECURITY is not set

#
# uClibc development/debugging options
#
CROSS_COMPILER_PREFIX="$(CROSS_COMPILE)"

ifdef OPENRG_DEBUG
  DODEBUG=y
else
  # Tell rg.mak to strip ulibc objs
  #STRIP_OBJS=y
endif
LIBC_CONFIGS+=DODEBUG

ifeq ($(OPENRG_DEBUG)-$(UCLIBC_HAS_THREADS),y-y)
  DODEBUG_PT=y
endif
LIBC_CONFIGS+=DODEBUG_PT

# DOASSERTS is not set
LIBC_CONFIGS+=DOASSERTS

# SUPPORT_LD_DEBUG is not set
# SUPPORT_LD_DEBUG_EARLY is not set
WARNINGS="-Wall"

LIBC_CONFIGS+=WARNINGS SUPPORT_LD_DEBUG_EARLY SUPPORT_LD_DEBUG

# UCLIBC_MJN3_ONLY is not set
